{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="wrapper">
    <!-- Section Started Heading -->
    <section class="section section-inner started-heading">
        <div class="container">
            <!-- Heading -->
            <div class="m-titles align-center">
                <h1 class="m-title splitting-text-anim-1 scroll-animate" data-splitting="words" data-animate="active">
                    <span> Our Blogs </span>
                </h1>
                <div class="m-subtitle splitting-text-anim-1 scroll-animate" data-splitting="words" data-animate="active">
                    <span> Recent Articles </span>
                </div>
            </div>
        </div>
    </section>
    <!-- Section - Blog -->
    <div class="section section-inner m-archive">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">
                    <!-- Blog Items -->
                    <div class="articles-container">
                        {% if searchlist %}
                        
                        {% for blog in searchlist %}
                        <div class="archive-item scrolla-element-anim-1 scroll-animate" data-animate="active">
                            <div class="image">
                                <a href="{% url 'blog-detail' blog.slug %}">
                                    <img src="{{ blog.image.url }}" alt="{{ blog.title }}" loading="lazy">
                                </a>
                            </div>
                            <div class="desc">
                                <div class="category lui-subtitle">
                                    <span>{{ blog.date }}</span>
                                </div>
                                <h5 class="lui-title">
                                    <a href="{% url 'blog-detail' blog.slug %}">{{ blog.title }}</a>
                                </h5>
                                <div class="lui-text">
                                    <p>{{ blog.description1|safe|truncatewords:"30"|linebreaks }}</p>
                                    <div class="readmore">
                                        <a href="{% url 'blog-detail' blog.slug %}" class="lnk">Read more</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}

                        {% else %}
                        
                        {% for blog in bloglist %}
                        <div class="archive-item scrolla-element-anim-1 scroll-animate" data-animate="active">
                            <div class="image">
                                <a href="{% url 'blog-detail' blog.slug %}">
                                    <img src="{{ blog.image.url }}" alt="{{ blog.title }}" loading="lazy">
                                </a>
                            </div>
                            <div class="desc">
                                <div class="category lui-subtitle">
                                    <span>{{ blog.date }}</span>
                                </div>
                                <h5 class="lui-title">
                                    <a href="{% url 'blog-detail' blog.slug %}">{{ blog.title }}</a>
                                </h5>
                                <div class="lui-text">
                                    <p>{{ blog.description1|safe|truncatewords:"30"|linebreaks }}</p>
                                    <div class="readmore">
                                        <a href="{% url 'blog-detail' blog.slug %}" class="lnk">Read more</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {% endfor %}
                        <div class="pager">
                            {% comment %} <span class="page-numbers current">1</span>
                            <a class="page-numbers" href="#">2</a>
                            <a class="next page-numbers" href="#">Next</a> {% endcomment %}
                            <ul class="pagination">
                                {% if bloglist.has_previous %}
                              <li class="page-item" >
                                <a class="page-link " href="?page={{ bloglist.previous_page_number }}" style="text-decoration:none; color:black; font-weight:bold;">Previous</a>
    
                            </li>
                                {% else %}
                                <li class="page-item disabled">
                                <a class="page-link page-numbers" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                              </li>
                                {% endif %}
                          
                                {% for i in bloglist.paginator.page_range %}
                                {% if i == bloglist.number %}
                              <li class="page-item active current">
                                <a class="page-link page-numbers" style="text-decoration:none;" >{{ i }}</a>
                              </li>
                                  {% else %}
                              <li class="page-item"><a class="page-link" href="?page={{ i }}" style="text-decoration:none;">{{ i }}</a></li>
                                {% endif %}
                                {% endfor %}
                                {% if bloglist.has_next %}
                              <li class="page-item">
                                <a class="page-link page-numbers" href="?page={{ bloglist.next_page_number }}" style="text-decoration:none;">Next</a>
                              </li>
                                {% else %}
                                <li class="page-item disabled">
                                <a class="page-link page-numbers" href="#" tabindex="-1" aria-disabled="true">Next</a>
                              </li>
                                {% endif %}
                            </ul>
                          </nav>
                        </div>
                        {% endif %}
                    </div>  
                    
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4">
                    <!-- sidebar -->
                    <div class="col__sedebar scrolla-element-anim-1 scroll-animate" data-animate="active">
                        <div class="content-sidebar">
                            <aside class="widget-area">
                                <div class="widget widget_block widget_search">
                                    <form class="wp-block-search" method="get">
                                        {% csrf_token %}
                                        <div class="wp-block-search__inside-wrapper">
                                            <input type="search" class="wp-block-search__input wp-block-search__input" name="search" id="search">
                                            <button type="submit" class="wp-block-search__button wp-element-button">Search</button>
                                        </div>
                                    </form>
                                </div>
                                <section class="widget widget_block">
                                    <div class="wp-block-group">
                                        <div class="wp-block-group__inner-container">
                                            <h2>Recent Posts</h2>
                                            <ul class="wp-block-latest-posts__list wp-block-latest-posts">
                                                {% for blog in bloglist|slice:":3" %}
                                                <li><a class="wp-block-latest-posts__post-title" href="{% url 'blog-detail' blog.slug %}">
                                                    {{ blog.title }}
                                                </a></li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>
                                </section>
                                <section class="widget widget_block">
                                    <div class="is-layout-flow wp-block-group">
                                        <div class="wp-block-group__inner-container">
                                            <h2>Categories</h2>
                                            <ul class="wp-block-categories-list wp-block-categories">
                                                {% for type in typelist %}
                                                <li class="cat-item cat-item-2"><a href="{% url 'type' type.slug %}">{{ type }}</a></li>
                                                {% endfor %}    
                                            </ul>
                                        </div>
                                    </div>
                                </section>
                            </aside>
                        </div>
                    </div>
                </div>
            </div>
            <div class="v-line-left v-line-top">
                <div class="v-line-block"><span></span></div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}